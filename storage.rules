// Firebase Storage Security Rules
// Add these rules to your Storage in the Firebase Console
// Go to Firebase Console > Storage > Rules and replace with these rules

rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Allow public read access to all images
    match /images/{allPaths=**} {
      allow read: if true;
    }
    
    // Allow uploads to images/admin/ with validation
    // (Admin UI is protected by session auth, so Firebase can allow public uploads)
    match /images/admin/{fileName} {
      allow write: if request.resource.contentType.matches('image/.*') &&
                      request.resource.size < 5242880; // 5MB limit
    }

    // Deny all other access
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}

/*
HOW TO SET UP FIREBASE STORAGE RULES:

1. Go to Firebase Console (https://console.firebase.google.com)
2. Select your project
3. Go to Storage in the left menu
4. Click on the "Rules" tab
5. Replace all existing rules with the content above
6. Click "Publish"

RULES EXPLANATION:

1. Public Read Access:
   - Anyone can read images from /images/ folder
   - No authentication required for reading

2. Admin Upload:
   - Authenticated users can upload to /images/admin/
   - Files must be images (image/*)
   - Max file size: 5MB (5242880 bytes)

3. Security:
   - All other paths deny read and write
   - Prevents unauthorized uploads
   - Protects against abuse

TROUBLESHOOTING:

If you get "Permission Denied" errors:
- Make sure your Firebase project is initialized in lib/firebase.ts
- Check that storage is enabled in Firebase Console
- Verify the rules are published and active

If images won't upload:
- Check browser console for specific error messages
- Ensure file is actually an image
- Verify file size is under 5MB
- Make sure you're authenticated (if applicable)
*/
